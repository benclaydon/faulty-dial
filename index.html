<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>7 Segment Display</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div>
  <!-- One individual display -->
  <div class="dial-container">
    <div class="dial-button">
      <button id="increase_unbroken3" onclick="unbrokenNum = increaseVal(unbrokenNum, 3)">+</button>
      <div class="display" id="unbroken3">
        <div class="segment a"></div>
        <div class="segment b"></div>
        <div class="segment c"></div>
        <div class="segment d"></div>
        <div class="segment e"></div>
        <div class="segment f"></div>
        <div class="segment g"></div>
      </div>
      <button id="decrease_unbroken3" onclick="unbrokenNum = decreaseVal(unbrokenNum, 3)">-</button>
    </div>

    <div class="dial-button">
      <button id="increase_unbroken2" onclick="unbrokenNum = increaseVal(unbrokenNum, 2)">+</button>
      <div class="display" id="unbroken2">
        <div class="segment a"></div>
        <div class="segment b"></div>
        <div class="segment c"></div>
        <div class="segment d"></div>
        <div class="segment e"></div>
        <div class="segment f"></div>
        <div class="segment g"></div>
      </div>
      <button id="decrease_unbroken2" onclick="unbrokenNum = decreaseVal(unbrokenNum, 2)">-</button>
    </div>

    <div class="dial-button">
      <button id="increase_unbrokenq" onclick="unbrokenNum = increaseVal(unbrokenNum, 1)">+</button>
      <div class="display" id="unbroken1">
        <div class="segment a"></div>
        <div class="segment b"></div>
        <div class="segment c"></div>
        <div class="segment d"></div>
        <div class="segment e"></div>
        <div class="segment f"></div>
        <div class="segment g"></div>
      </div>
      <button id="decrease_unbroken1" onclick="unbrokenNum = decreaseVal(unbrokenNum, 1)">-</button>
    </div>

    <div class="dial-button">
      <button id="increase_unbroken0" onclick="unbrokenNum = increaseVal(unbrokenNum, 0)">+</button>
      <div class="display" id="unbroken0">
        <div class="segment a"></div>
        <div class="segment b"></div>
        <div class="segment c"></div>
        <div class="segment d"></div>
        <div class="segment e"></div>
        <div class="segment f"></div>
        <div class="segment g"></div>
      </div>
      <button id="decrease_unbroken0" onclick="unbrokenNum = decreaseVal(unbrokenNum, 0)">-</button>
    </div>
  </div>

  <div class="dial-container">
    <div class="dial-button">
      <button id="increase_broken3" onclick="brokenNum = increaseVal(brokenNum, 3, brokenMap);">+</button>
      <div class="display" id="broken3">
        <div class="segment a"></div>
        <div class="segment b"></div>
        <div class="segment c"></div>
        <div class="segment d"></div>
        <div class="segment e"></div>
        <div class="segment f"></div>
        <div class="segment g"></div>
      </div>
      <button id="decrease_ broken3" onclick="brokenNum = decreaseVal(brokenNum, 3, brokenMap);">-</button>
    </div>

    <div class="dial-button">
      <button id="increase_broken2" onclick="brokenNum = increaseVal(brokenNum, 2, brokenMap);">+</button>
      <div class="display" id="broken2">
        <div class="segment a"></div>
        <div class="segment b"></div>
        <div class="segment c"></div>
        <div class="segment d"></div>
        <div class="segment e"></div>
        <div class="segment f"></div>
        <div class="segment g"></div>
      </div>
      <button id="decrease_ broken2" onclick="brokenNum = decreaseVal(brokenNum, 2, brokenMap);">-</button>
    </div>

    <div class="dial-button">
      <button id="increase_broken1" onclick="brokenNum = increaseVal(brokenNum, 1, brokenMap)">+</button>
      <div class="display" id="broken1">
        <div class="segment a"></div>
        <div class="segment b"></div>
        <div class="segment c"></div>
        <div class="segment d"></div>
        <div class="segment e"></div>
        <div class="segment f"></div>
        <div class="segment g"></div>
      </div>
      <button id="decrease_ broken1" onclick="brokenNum = decreaseVal(brokenNum, 1, brokenMap)">-</button>
    </div>

    <div class="dial-button">
      <button id="increase_broken0" onclick="brokenNum = increaseVal(brokenNum, 0, brokenMap)">+</button>
      <div class="display" id="broken0">
        <div class="segment a"></div>
        <div class="segment b"></div>
        <div class="segment c"></div>
        <div class="segment d"></div>
        <div class="segment e"></div>
        <div class="segment f"></div>
        <div class="segment g"></div>
      </div>
      <button id="decrease_ broken0" onclick="brokenNum = decreaseVal(brokenNum, 0, brokenMap)">-</button>
    </div>
  </div>

  <button id="submit" onclick="submit(brokenNum, unbrokenNum)">Submit</button>
  <button onclick='window.location.href = "help.html";'>Instructions</button>
  
  <div>
    Moves: <span id="moves-counter">0</span>
  </div>

  <script src="setup.js"></script>

  <script>
    let seed = getSeed();
    let randomState = getBrokenSegments(seed);
    let brokenMap = Array(NUM_DIALS).fill(0);

    for (var i = 0; i < NUM_DIALS; i++) {
      brokenMap[i] = getNewMap(i, randomState.segments);
    }

    const START_BROKEN = rng(randomState.nextSeed);
    var brokenNum = Math.floor((Math.pow(10, NUM_DIALS)) * START_BROKEN.value);

    const START_UNBROKEN = rng(START_BROKEN.nextSeed);
    var unbrokenNum = Math.floor((Math.pow(10, NUM_DIALS)) * START_UNBROKEN.value);

    setUnbrokenDial(unbrokenNum);
    setBrokenDial(brokenNum, brokenMap);

    console.log(brokenNum)
    var moves = 0;
  </script>

</body>
</html>